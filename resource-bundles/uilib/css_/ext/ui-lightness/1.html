<!DOCTYPE html>
<!-- saved from url=(0040)http://barancev.github.io/good-locators/ -->
<html class="gr__barancev_github_io"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>...как строить хорошие локаторы? • А хотите, я расскажу вам...</title>
    <meta name="description" content="Самое главное -- понять, чем хорошие локаторы отличаются от плохих">
    <meta name="keywords" content="selenium">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="...как строить хорошие локаторы?">
	<meta name="twitter:description" content="Самое главное -- понять, чем хорошие локаторы отличаются от плохих">
	<meta name="twitter:site" content="@barancev">
	<meta name="twitter:creator" content="@barancev">
	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:image" content="http://barancev.github.io/images/2017-09-18-good-locators/green-duck.png">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="ru_RU">
	<meta property="og:type" content="article">
	<meta property="og:title" content="...как строить хорошие локаторы?">
	<meta property="og:description" content="Самое главное -- понять, чем хорошие локаторы отличаются от плохих">
	<meta property="og:url" content="http://barancev.github.io/good-locators/">
	<meta property="og:image" content="http://barancev.github.io/images/2017-09-18-good-locators/green-duck.png">
	<meta property="og:site_name" content="А хотите, я расскажу вам...">

    <link rel="canonical" href="http://barancev.github.io/good-locators/">

    <link href="http://barancev.github.io/atom.xml" type="application/atom+xml" rel="alternate" title="А хотите, я расскажу вам... Atom Feed">
    <link href="http://barancev.github.io/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="./1_files/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://barancev.github.io/js/vendor/html5shiv.min.js"></script>
      <script src="http://barancev.github.io/js/vendor/respond.min.js"></script>
    <![endif]-->

    <script async="" src="./1_files/analytics.js.download"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64278329-1', 'auto');
  ga('send', 'pageview');

</script>
  <script type="text/javascript" async="" src="./1_files/embed.js.download"></script><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style><link rel="preload" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.6320e20b57d877f77ba9dc866ff7fb10.css"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.5c2c79222b3102b8568ff61fb846a843.js"><link rel="preload" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.f70d641213ff2b7d8720b76747efe591.js"><link rel="preload" as="script" href="https://disqus.com/next/config.js"></head>

  <body id="js-body" data-gr-c-s-loaded="true">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="http://barancev.github.io/" class="site-title">А хотите, я расскажу вам...</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="http://barancev.github.io/">А хотите, я расскажу вам...</a></li>
	
    
    <li><a href="http://software-testing.ru/trainings/" target="_blank">Тренинги</a></li>
  
    
    <li><a href="http://selenium2.ru/consulting.html" target="_blank">Неотложка</a></li>
  
    
    <li><a href="http://selenium2.ru/" target="_blank">selenium2.ru</a></li>
  
    
    <li><a href="http://barancev.github.io/about/">Кто автор?</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->
    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <ul class="menu-item">
    <li>
      
      <a href="http://software-testing.ru/trainings/">
        
        <div class="title">Тренинги</div>
        
      </a>
    </li><li>
      
      <a href="http://selenium2.ru/consulting.html">
        
        <div class="title">Неотложка</div>
        
      </a>
    </li><li>
      
      <a href="http://selenium2.ru/">
        
        <div class="title">selenium2.ru</div>
        
      </a>
    </li><li>
      
      <a href="http://barancev.github.io/about/">
        
        <div class="title">Кто автор?</div>
        
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope="" itemtype="http://schema.org/Article">
		
		<div class="page-feature">
			<div class="page-image">
				<img src="./1_files/dom.png" class="page-feature-image" alt="...как строить хорошие локаторы?" itemprop="image">
				
			</div><!-- /.page-image -->
		</div><!-- /.page-feature -->
		
		<div class="page-title">
			<h1>...как строить хорошие локаторы?</h1>
		</div>
		<div class="inner-wrap">
		    <div class="right-side">
			  <nav class="toc"></nav><!-- /.toc -->
			  
  <nav class="tags">
    <ul>
      
      <li><a href="http://barancev.github.io/tags/selenium/">selenium</a></li>
      
    </ul>
  </nav><!-- /.tags -->

			</div>
			<div id="content" class="page-content" itemprop="articleBody">
				<p>На самом деле конкретно про то, как строить локаторы, я буду рассказывать на <a href="http://koteconf.ru/">онлайн-конференции КоТэ</a>. А здесь и сейчас – небольшое предисловие о том, чем хорошие локаторы отличаются от плохих, а также небольшое упражнение.</p>

<p>Инструмент автоматизации веб-приложений, который работает через браузер (Selenium или любой другой) должен иметь механизм поиска элементов на странице приложения. Прежде чем выполнить действие с элементом – его нужно сначала найти. Механизмы поиска элементов как раз и называются “локаторами”.</p>

<p>Большинство инструментов автоматизации веб-приложений (а может быть даже все) ограничены теми средствами поиска элементов, которые предоставляют браузеры. Это ровно те же самые функции языка JavaScript, которые используют программисты, разработчики фронтэнда. Например, функция <a href="https://developer.mozilla.org/ru/docs/Web/API/Document/getElementById">getElementById</a> позволяет найти элемент по идентификатору (значению атрибута id), функция <a href="https://developer.mozilla.org/ru/docs/Web/API/Document/getElementsByName">getElementsByName</a> используется для поиска элементов по имени, а функция <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector">querySelector</a> выполняет поиск при помощи языка запросов <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Selectors">CSS Selectors</a>.</p>

<p>В общем, с одной стороны, разных механизмов поиска достаточно много, с другой стороны, сложные языки запросов (CSS Selectors и XPath) дают большую свободу в построении локаторов. Поэтому для каждого элемента можно построить локатор, который его находит, многими разными способами.</p>

<p>Как понять, какой из возможных локаторов самый лучший?</p>

<p>“Какой-нибудь” локатор построить легко. Например, можно записать рекордером действие с элементом, и рекордер предложит некоторый локатор, по которому элемент находится.</p>

<p>Но как известно, основные проблемы и расходы в автотестировании связаны не с созданием тестов, а с их поддержкой и сопровождением – анализ сбоев, доработка после изменений тестируемого приложения, улучшение самих тестов.</p>

<p>Поэтому самыми важными являются именно те свойства локаторов, которые облегчают сопровождение тестов.</p>

<p>Исходя из этого требования, я сформулирую три критерия “хорошести” локаторов.</p>

<p><strong>1. Хороший локатор должен быть устойчив к изменениям.</strong></p>

<p>Это, пожалуй, самое главное. Если после небольшого изменения тестируемого приложения все тесты приходится переделывать – это просто катастрофа.</p>

<p>Есть изменения, которые изначально заложены в приложение и могут определяться его настройками – локализация, расположение блоков на странице (например, включить/отключить рекламные блоки), “шкурки” (skins) и прочее. Локаторы нужно сразу проектировать так, чтобы они работали с разными вариантами настроек.</p>

<p>Есть изменения, которые случатся в будущем. Тут заранее подготовиться на 100% нельзя, но можно хотя бы постараться предугадать, с чем эти изменения будут связаны. Например, если сейчас пока приложение одноязычное, но есть планы выхода на новые рынки – вероятно, добавятся разные локализации, поэтому поиск элементов по тексту перестанет работать. Если дизайнер скажет, что кнопки нужно сделать не прямоугольными, а закруглёнными – поменяются стили и вёрстка кнопок, поэтому полагаться при поиске на конкретный стиль рискованно, лучше выбрать какие-то более стабильные признаки.</p>

<p>Конечно, при массированном изменении тестируемого приложения противостоять изменениям в тестах не удастся, но это вполне ожидаемо. Но незначительные изменения не должны приводить к разрушению тестов.</p>

<p><strong>2. Хороший локатор должен быть понятным.</strong></p>

<p>Когда вы разрабатываете тесты, вы помните структуру страницы и можете легко представить, что найдётся по тому или иному локатору. Но через несколько месяцев память будет уже не так свежа, и глядя на запутанный локатор будет уже не так легко догадаться, что он ищет или хотя бы что он должен искать.</p>

<p>Конечно, можно добавить комментарии и пояснения. Но лучше всё таки стремиться к выразительности и понятности самих локаторов. Они должны быть простыми и осмысленными. Тогда читать и понимать старые тесты будет легко и приятно.</p>

<p><strong>3. Хороший локатор должен быть.</strong></p>

<p>Увы, иногда хороший локатор вообще не удаётся построить. Вёрстка страницы плывёт, свойства элементов постоянно меняются. Если пытаться написать простой локатор – он оказывается неустойчивым, уже на следующий он не работает. В попытках повысить устойчивость повышаем сложность локаторов – но уже не через месяц, а через неделю становится непонятно, что они ищут, потому что прочитать локатор длиной в две строчки вообще невозможно.</p>

<p>И тогда у тестировщика опускаются руки, он говорит “приложение невозможно автоматизировать” и уходит.</p>

<p>Это неправильно. Нужно бороться за свои права.</p>

<p>Идите к разработчикам и договаривайтесь о повышении тестопригодности приложения. Вообще-то они хорошие люди, просто они думали о своих проблемах и не думали о ваших. Если вы не расскажете им о том, что вам нужно от приложения – как они узнают?</p>

<p><strong>Ну а теперь обещанные упражнения.</strong></p>

<p>При подготовке мастер-класса по построению локаторов, который я буду проводить на <a href="http://koteconf.ru/">онлайн-конференции КоТэ</a>, я подготовил серию упражнений для участников.</p>

<p>Но даже если вы не являетесь участником конференции – всё равно можете попробовать</p>

<p><strong><a href="https://docs.google.com/forms/d/e/1FAIpQLSeH2tck0nP80ThQOaojA3hyVnMgmiz7sdav2wYWYsLfCOhpTw/viewform">выполнить эти упражнения</a></strong></p>

<p>“Правильные” ответы я опубликую после конференции, то есть примерно через две недели, и тогда вы сможете сравнить свой вариант решения с моим. А если хотите не только решения, но и подробный разбор – <a href="http://koteconf.ru/">приходите на конференцию</a>. На мастер-классе я проведу разбор типовых ошибок, покажу те варианты, которые я считаю “хорошими”, и расскажу о конкретных приемах и правилах, которыми я руководствуюсь при построении локаторов, чтобы они получались хорошими.</p>

				<hr>
				<footer class="page-footer">
					

<div class="table">
<div>
<div class="author-image">
	<img src="./1_files/bio-photo.jpg" alt="Алексей Баранцев">
</div><!-- ./author-image -->
<div class="page-meta">
	<time datetime="2017-09-18T09:49:05Z" itemprop="datePublished"><span>September 18<br>2017</span></time>
</div><!-- /.page-meta -->
</div>
<div>
<div class="author-content">
	<h3 class="author-name">Автор:  <span itemprop="author">Алексей Баранцев</span></h3>
	<p class="author-bio">Если вам понравилась эта статья, вы можете поделиться ею в социальных сетях (кнопочки ниже), а потом <a href="http://barancev.github.io/">вернуться на главную страницу блога и почитать другие мои статьи</a>.<br>Ну а если вы не согласны с чем-то или хотите что-нибудь дополнить – оставьте комментарий ниже, может быть это послужит поводом для написания новой интересной статьи.</p>
</div><!-- ./author-content -->
</div>
<div>
				</div></div></footer><!-- /.footer -->
				<footer class="page-footer">
					<div class="inline-btn">
	<a class="btn-social twitter" href="https://twitter.com/intent/tweet?text=...%D0%BA%D0%B0%D0%BA%20%D1%81%D1%82%D1%80%D0%BE%D0%B8%D1%82%D1%8C%20%D1%85%D0%BE%D1%80%D0%BE%D1%88%D0%B8%D0%B5%20%D0%BB%D0%BE%D0%BA%D0%B0%D1%82%D0%BE%D1%80%D1%8B?&amp;url=http://barancev.github.io/good-locators/&amp;via=barancev" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i> Share on Twitter</a>
	<a class="btn-social facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://barancev.github.io/good-locators/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i> Share on Facebook</a>
	<a class="btn-social google-plus" href="https://plus.google.com/share?url=http://barancev.github.io/good-locators/" target="_blank"><i class="fa fa-google-plus" aria-hidden="true"></i> Share on Google+</a>
</div><!-- /.share-this -->

				</footer><!-- /.footer -->
				<aside>
					<hr>
<div id="disqus_thread"><iframe id="dsq-app5747" name="dsq-app5747" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./1_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 688px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'barancev';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>

				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		<div class="ads"><style>
.responsive-ads { width: 300px; height: 200px; }
@media(min-width: 520px) { .responsive-ads { width: 468px; height: 60px; } }
@media(min-width: 768px) { .responsive-ads { width: 160px; height: 600px; } }
@media(min-width: 900px) { .responsive-ads { width: 200px; height: 600px; } }
.responsive-ads .myheader {
font-family: "Helvetica Neue","Segoe UI",Arial,sans-serif;
font-weight: 700; font-size: 1.25em; text-transform: uppercase;
}
.responsive-ads ul { list-style: none; padding: 0px; }
.responsive-ads ul li { border-top: 1px dotted grey; padding-bottom: 5px; margin-bottom: 5px; }
.responsive-ads ul li a { font-weight: bold; }
</style>

<ins class="responsive-ads" style="display:inline-block">
<div class="myheader">Мои тренинги</div>
<ul>


  
      <li>
<span>13.10.2017</span><br>
<a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=233">
Программирование на Python для тестировщиков</a>
</li>



    <li>
<span>13.10.2017</span><br>
<a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=126">
Тестирование защищенности</a>
</li>  

        <li>
<span>20.10.2017</span><br>
<a href="http://software-testing.ru/edu/1-schedule/189-web">
Тестирование веб-приложений </a>
</li>

     <li>
<span>20.10.2017</span><br>
<a href="http://software-testing.ru/edu/1-schedule/185-selenium">
Selenium: стартовый уровень</a>
</li> 

     <li>
<span>20.10.2017</span><br>
<a href="http://software-testing.ru/edu/3-online/1-java-for-testers">
Программирование на Java для тестировщиков</a>
</li>  

     <li>
<span>20.10.2017</span><br>
<a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=242">
Selenium WebDriver: полное руководство </a>
</li>
       <li>
<span>27.10.2017</span><br>
<a href="http://software-testing.ru/trainings/schedule?&amp;task=3&amp;cid=234">
Автоматизация функционального тестирования</a>
</li>

    <li>
<span>27.10.2017</span><br>
<a href="http://software-testing.ru/trainings/schedule?task=3&amp;cid=232">
Организация автоматизированного тестирования</a>
</li>
  
     <li>
<span>27.10.2017</span><br>
<a href="http://software-testing.ru/edu/1-schedule/46-test-design">
Практикум по тест-дизайну</a>
</li>
  
  
     <li>
<span>03.11.2017</span><br>
<a href="http://software-testing.ru/edu/1-schedule/226-csharp-for-testers">
Программирование на С# для тестировщиков</a>
</li>

 

    <li>
<span>03.11.2017</span><br>
<a href="http://software-testing.ru/edu/1-schedule/222-testng-junit">
Эффективное использование TestNG и JUnit</a>
</li>
      <li>
<span>03.11.2017</span><br>
<a href="http://software-testing.ru/edu/1-schedule/19-performance-testing-jmeter">
Тестирование производительности (JMeter)</a>
</li>
 
</ul>

А ещё есть? <a href="http://software-testing.ru/trainings/schedule">Конечно!</a>
</ins>
</div><!-- /.ads -->
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="http://barancev.github.io/"></a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">© 2017 <a href="http://barancev.github.io/">Алексей Баранцев</a> | powered by <a href="http://jekyllrb.com/" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>
    </div>

    <script src="./1_files/jquery-1.9.1.min.js.download"></script>
    <script src="./1_files/main.js.download"></script>
    

  


<iframe style="display: none;" src="./1_files/saved_resource(2).html"></iframe></body></html>